
if [ -f /usr/local/git/contrib/completion/git-completion.bash ]; then
  . /usr/local/git/contrib/completion/git-completion.bash
fi


if [ -f $(brew --prefix)/etc/bash_completion ]; then
  . $(brew --prefix)/etc/bash_completion
fi

if [ -f ~/bin/sensible.bash ]; then
   source ~/bin/sensible.bash
fi

eval $(thefuck --alias)

# Preferences

export BROWSER=firefox

# VI settings
export EDITOR=vim
export VISUAL=vim
export FZF_DEFAULT_COMMAND='ag -g ""'
#export NVIM_LISTEN_ADDRESS=/tmp/nvim.sock

# -- GIT SETTINGS ----------
export VERSIONER_PERL_PREFER_32_BIT=yes

alias fir=git ; alias gut=git
alias wow="git status"
alias so=git
alias such=git
alias very=git
alias much=git
alias log="git log --stat"
alias gitcleanup="git branch --merged master | grep -v '^*\|master' | xargs -n 1 git branch -d"

alias gits="git config user.email richard@spiralarm.com"
alias gitd="git config user.email richard@dallaway.com"
alias gitu="git config user.email richard@underscoreconsulting.com"

alias gbr='git for-each-ref --sort="-authordate:iso8601" --format=" %(authordate:iso8601)%09%(refname:short)" refs/heads'

GIT_PS1_SHOWDIRTYSTATE=true

# Mac nonsense
alias fixcamera="sudo killall VDCAssistant"

# -- JVM -----

export SCALA_HOME=/opt/scala/scala-2.12.0
export DOTTY_HOME=/opt/dotty

export JAVA_OPTS="-Dfile.encoding=utf8"

export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/

alias jmc=$JAVA_HOME/bin/jmc

# -- HASKELL --

export GHCI_PATH=/Users/richard/.stack/programs/x86_64-osx/ghc-8.0.1
export STACK_INSTALL_PATH=/Users/richard/.local/bin

# -- OTHER LANGUAGES -------

export GOPATH=$HOME/Developer/go
export PATH=$PATH:$GOPATH/bin

# -- UTILITIES -------------

alias fixow='/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -kill -r -domain local -domain user;killall Finder;echo "Open With has been rebuilt, Finder will relaunch"'
alias laclean="rm -f *.log *.out *.fls *.aux *.fdb_latexmk *.toc"

# -- AWS ------------------

export EC2_CERT=/opt/amazon/spiralarm/2010/cert-DLHYF5HIJOXAPTPLFOXPUUXSWGKORWNL.pem
export EC2_PRIVATE_KEY=/opt/amazon/spiralarm/2010/sakey
alias sshstage="ssh -i $EC2_PRIVATE_KEY ubuntu@staging"
alias sshprod="ssh -i $EC2_PRIVATE_KEY ubuntu@production"
alias scp2="scp -i $EC2_PRIVATE_KEY"

# -- PATH AND SHELL PREFS ---
export PATH=$JAVA_HOME/bin:$PATH
export PATH=$SCALA_HOME/bin:$PATH
export PATH=$DOTTY_HOME/bin:$PATH
export PATH=$GHCI_PATH/bin:$STACK_INSTALL_PATH:$PATH
export PATH=/Applications/Postgres.app/Contents/Versions/latest/bin:$PATH
export PATH=/usr/local/bin:/usr/local/sbin:$PATH
export PATH=$PATH:/Users/richard/bin

PS1='\[\033[34m\]\W\[\033[31m\]$(__git_ps1)\[\033[00m\]\$ '

export TERM='xterm-256color'

test -e "${HOME}/.iterm2_shell_integration.bash" && source "${HOME}/.iterm2_shell_integration.bash"
